@model IEnumerable<Vanessa.Models.Publicacion>
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link rel="stylesheet" href="~/Css/styleMuroP14.css" />
    <link rel="stylesheet" href="~/Css/tipografias.css" />
    <style>
        .modal-imagen {
            max-width: 300px; /* Tamaño máximo de imagen */
            max-height: 300px;
            object-fit: cover; /* Mantiene la proporción */
        }

        .pdf-viewer {
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <header>
        <div></div>
        <div onmouseover="casitas()" onmouseout="casitas2()" id="casita1" class="casita1">
            <p>VOLVER</p>
            <a href="@Url.Action("Index", "Home")" id="link1"></a>
        </div>
        <div></div>
        <div id="abr" onclick="abrirGestion()">
            <p>GESTION</p>
            <a href="@Url.Action("Crear", "Publicacion")"></a>
        </div>
        <div class="titulo1">MURO</div>
        <div class="titulo2">DE</div>
        <div class="titulo3">PUBLICACIONES</div>
        <div id="volver" class="hide" onclick="cerrarGestion()"></div>
    </header>

    <section id="mostrarPublicaciones">
        <section class="fila fila1">
            <div></div>
            <div></div>
            <div></div>
        </section>
        <section class="fila fila2">
            <div></div>
            <div></div>
            <div></div>
        </section>
        <section class="fila fila3">
            <div></div>
            <div></div>
            <div></div>
        </section>
        <section class="fila fila4">
            <div></div>
            <div></div>
            <div></div>
        </section>

        <section class="asdon">
            <aside class="asd1"></aside>
            <aside class="asd2"></aside>
        </section>
    </section>

    <!-- Mostrar publicaciones -->
    <section class="publicaciones">
        @foreach (var item in Model)
        {
            <div class="publicacion" onclick="mostrarModal(@item.Id_Publicacion)">
                <img src="@item.ImagenPublicacion" alt="Imagen de Publicación" onerror="this.style.display='none'" />
                <a id="inf" href="#@item.Id_Publicacion">
                    <p class="nombreP">@item.NombrePublicacion</p>
                    <p class="autor">@item.FechaPublicacion.ToShortDateString()</p>
                    <p class="horaP">@item.FechaPublicacion.ToShortTimeString()</p>
                </a>
            </div>
        }
    </section>

    <!-- Modal de publicación -->
    @foreach (var item in Model)
    {
        <section class="modalPublicacion hide" id="modal-@item.Id_Publicacion">
            <div class="modalCerrar" id="cerrar">
                <a href="#" onclick="ocultarModal(@item.Id_Publicacion)" class="btnAtras">VOLVER</a>
            </div>
            <div class="publicac">
                <div class="barraL"></div>
                <div class="barraT"></div>

                <p class="nombrePubli">
                    @item.NombrePublicacion
                    <div class="actualizar">
                        <a asp-action="Editar" asp-route-id="@item.Id_Publicacion" class="btn btn-warning btn-sm">Editar</a>
                    </div>
                    <div class="eliminar">
                        <a asp-action="Eliminar" asp-route-id="@item.Id_Publicacion" class="btn btn-danger btn-sm">Eliminar</a>
                    </div>
                </p>

                <div class="cacion">
                    <div class="imagen">
                        <img src="@item.ImagenPublicacion" class="modal-imagen" onerror="this.style.display='none'">
                    </div>
                    <div class="fecha">
                        <p>FECHA:</p>
                        <p>@item.FechaPublicacion.ToShortDateString()</p>
                    </div>
                    <div class="hora">
                        <p>HORA:</p>
                        <p>@item.FechaPublicacion.ToShortTimeString()</p>
                    </div>
                    <div class="lugar">
                        <p>LUGAR:</p>
                        <p>@item.LugarPublicacion</p>
                    </div>
                    <div class="tipoP">
                        <p>TIPO:</p>
                        <p>@item.TipoPublicacion</p>
                    </div>
                    <div class="contenido">
                        <p>CONTENIDO:</p>
                        <div>
                            <p>@item.ContenidoPublicacion</p>
                        </div>
                    </div>
                    <div class="actividades">
                        <p>ACTIVIDADES:</p>
                        <div>
                            <p>@item.ActividadesPublicacion</p>
                        </div>                        
                    </div>
                </div>

            </div>
@*             <p>
                <div class="actualizar">
                    <a asp-action="Editar" asp-route-id="@item.Id_Publicacion" class="btn btn-warning btn-sm">Editar</a>
                </div>
                <div class="eliminar">
                    <a asp-action="Eliminar" asp-route-id="@item.Id_Publicacion" class="btn btn-danger btn-sm">Eliminar</a>
                </div>
            </p> *@
        </section>

    }

    <script href="~/Js/muroPublicacion5.js"></script>
    <script>
        function mostrarModal(id) {
            const modal = document.getElementById('modal-' + id);
            if (modal) {
                modal.classList.remove('hide');
            }
        }

        function ocultarModal(id) {
            const modal = document.getElementById('modal-' + id);
            if (modal) {
                modal.classList.add('hide');
            }
        }
    </script>
</body>
</html>
